import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;
import java.util.Queue;
import java.util.Scanner;
import java.util.Stack;

public class TreeProblem {

	TreeNode rootNode;
	
	class TreeNode{
		int data;
		TreeNode left;
		TreeNode right;
		
		public TreeNode(int i) {
			// TODO Auto-generated constructor stub
			data = i;
			left = null;
			right = null;
		}
	};
	
	public static void main(String[] args) {
		
		//Scanner s = new Scanner(System.in);
		int count = 9;//Integer.parseInt(s.next());
		
		//s.nextLine();
		String elements = "8 0 7 7 5 8 5 0 -1";//s.nextLine();
		String[] arr = elements.split(" ");
		int[] a = new int[count];
		for(int i = 0; i < arr.length; i++){
			a[i] = Integer.parseInt(arr[i]);
		}
		
		TreeProblem obj = new TreeProblem();
		obj.constructTree(a, count);
	}
	
	public ArrayList<Integer> findElement(int[] arr, int v){
		ArrayList<Integer> al = new ArrayList<>();
		for(int i = 0; i < arr.length; i++)
			if(arr[i] == v)
				al.add(i);
		return al;
	}
	
	public void constructTree(int[] arr, int count){
		
		TreeNode node1;
		TreeNode node2;
		
		ArrayList<Integer> al = findElement(arr, -1);
		this.rootNode = new TreeNode(al.get(0));
		
		Stack<TreeNode> s = new Stack<>();
		s.push(rootNode);
		while(!s.isEmpty()){
			TreeNode node = s.pop();
			al = findElement(arr, node.data);
			if(al.size() == 1)
			{
				node1 = new TreeNode(al.get(0));
				node.left = node1;
				s.push(node1);
			}
			if(al.size() == 2)
			{
				node1 = new TreeNode(al.get(0));
				node.left = node1;
				s.push(node1);
				
				node2 = new TreeNode(al.get(1));
				node.right = node2;
				s.push(node2);
			}
		}
		inOrder(rootNode);
		System.out.println();
		levelOrder(rootNode);
	}
	
	public void inOrder(TreeNode root){
		if(root != null){
			inOrder(root.left);
			System.out.print(root.data + " ");
			inOrder(root.right);
		}
	}
	
	public void levelOrder(TreeNode root ) {
		int i = 1;
		Queue<TreeNode> q1 = new LinkedList<TreeNode>();
		Queue<TreeNode> q2 = new LinkedList<TreeNode>();
		q2.add(root);
		//levelRec(i, q2);
			while(!q2.isEmpty()){		
			
			if(i>0)
				i--;
			TreeNode n = q2.poll();
			if(n.left != null)
				q2.add(n.left);
			if(n.right != null)
				q2.add(n.right);

			
			if(i == 0)
			{
				i = q2.size();
				System.out.println();
			}
			System.out.print(n.data + " ");
		}
		
	}

	public void levelRec(int i, Queue<TreeNode> q2) {
		if(!q2.isEmpty()){		
			
			if(i>0)
				i--;
			TreeNode n = q2.poll();
			
			if(n.right != null)
				q2.add(n.right);
			if(n.left != null)
				q2.add(n.left);
			
			if(i == 0)
			{
				i = q2.size();
				//System.out.println();
			}
			levelRec(i, q2);
			System.out.print(n.data + " ");
			if(i == q2.size())
			{
				System.out.println();
			}
		}
	}
}


